# 多个库房

### 我有多个库房怎么玩？

Nature 建议的方法：在`订单状态`和`出库申请`间添加一个`订单拆分单`，以库房为维度进行订单拆分。这样**一个事务ID会变成多个事务ID**，后续流程如物流、配送等自此以后不能再使用订单的ID，而是用拆分单的ID。

这里有个问题要解决：如何标记拆分单该由哪个库房生产以及如何触发相应的处理呢？

- 可能的玩法：将库房相关的参数放到 `出库申请.content` 中，程序员在下一节点编程提取并处理。
- Nature 推荐的玩法：将库房相关的参数放到 `出库申请.context`中，这样做的好处是我们可以以非编程的方式控制流程。举例来说，我们现在用的是自建库房，现在要扩大规模，但为了节省成本，我们选择了业务外包，而外包的库房有些状态是无法跟踪的，所以后续流程是不一样的。这时候我们只需在`instance.context`增加类似于“warehouse.isOuter”的内容，便可以通过 Nature 的上下文选择技术以非编程方式进行流程控制，请参考 [relation.md](https://github.com/llxxbb/Nature/blob/master/doc/ZH/help/relation.md)。
- 
- 
- 
- 有关context 的示例请参考：XXX
- **Nature 要点**：可参数化的内容尽量放到 context 中，便于以非编程方式控制流程，从而增加系统的灵活性和可定制性以及`执行器`的复用性。

### 出库路由如何工作？

`Meta.setting.master`  设置成`order`，在生成的`instance.context`设置成类似于“warehouse = abc” 的形式。

### 不能用一个`出库申请`吗？

可以，但不建议。有以下的原因：

- Nature 主要面向的是业务而不是技术，如果每个库房

### 用一个`出库申请怎么玩？



